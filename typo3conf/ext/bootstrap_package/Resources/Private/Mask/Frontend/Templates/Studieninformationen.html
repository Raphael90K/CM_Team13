<div class="container bg-tertiary py-4">
    <h3 class="element-header mb-3">
        <span>Auf einen Blick:</span>
    </h3>
    <p>
        <strong>Studiengang: </strong>
        <span id="studiengang">
        <f:if condition="{data.tx_mask_studiengang}">
            {data.tx_mask_studiengang -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
    <p>
        <strong>Abschluss: </strong>
        <span id="abschluss">
        <f:if condition="{data.tx_mask_abschluss}">
            {data.tx_mask_abschluss -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
    <p>
        <strong>Art: </strong>
        <span id="art">
        <f:if condition="{data.tx_mask_art}">
            {data.tx_mask_art -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
    <p>
        <strong>Regelstudienzeit: </strong>
        <span id="regelstudienzeit">
        <f:if condition="{data.tx_mask_regelstudienzeit}">
        {data.tx_mask_regelstudienzeit -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
    <p>
        <strong>ECTS (Leistungspunkte): </strong>
        <span id="ects">
        <f:if condition="{data.tx_mask_ects}">
            {data.tx_mask_ects -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
    <p>
        <strong>Zulassungsbeschränkung: </strong>
        <span id="zulassungsbeschraenkung">
        <f:if condition="{data.tx_mask_zulasssungsbeschraenkung}">
            {data.tx_mask_zulasssungsbeschraenkung -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
    <p>
        <strong>Studienbeginn: </strong>
        <span id="studienbeginn">
        <f:if condition="{data.tx_mask_studienbeginn}">
            {data.tx_mask_studienbeginn -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
    <p>
        <strong>Bewerbungsfrist: </strong>
        <span id="bewerbungsfrist">
        <f:if condition="{data.tx_mask_bewerbungsfrist}">
            {data.tx_mask_bewerbungsfrist -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
    <p>
        <strong>Unterrichtssprache: </strong>
        <span id="unterrichtssprache">
        <f:if condition="{data.tx_mask_unterrichtssprache}">
            {data.tx_mask_unterrichtssprache -> f:format.nl2br()}
        </f:if>
        </span>
    </p>
</div>

<script>
    let schemaJSON = {
        "@context": "https://schema.org",
        "@type": "CollegeOrUniversity",
        "name": "Universität Trier",
        "url": "https://www.uni-trier.de/",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Universitätsring 15",
            "addressLocality": "Trier",
            "postalCode": "54296",
            "addressCountry": "Deutschland"
        },
        "telephone": "+49 651 201-0",
        "email": "info@uni-trier.de",
        "sameAs": [
            "https://www.facebook.com/uni.trier",
            "http://www.twitter.com/trieruni",
            "https://www.instagram.com/uni_trier/",
            "https://www.linkedin.com/school/trieruni/",
            "https://www.youtube.com/unitrier"
        ]
    }

    function add_educational_program(schemaJSON) {

        if (document.getElementById("studiengang") === null) {
            console.log("keine Studiengangseite");
            return schemaJSON;
        }

        const studiengang = document.getElementById("studiengang").textContent.trim();
        const abschluss = document.getElementById("abschluss").textContent.trim().split('|').map(item => item.trim());
        const art = document.getElementById("art").textContent.trim().split('|').map(item => item.trim());
        const regelstudienzeit = document.getElementById("regelstudienzeit").textContent.trim();
        const ects = document.getElementById("ects").textContent.trim().split('|').map(item => item.trim());
        const zulassungsbeschraenkung = document.getElementById("zulassungsbeschraenkung").textContent.trim().split(',').map(item => item.trim());
        const studienbeginn = document.getElementById("studienbeginn").textContent.trim().split('und').map(item => item.trim());
        const bewerbungsfrist = document.getElementById("bewerbungsfrist").textContent.trim().split('|').map(item => item.trim());
        const unterrichtssprache = document.getElementById("unterrichtssprache").textContent.trim();

        const studieninfo =
            {
                "@context": "https://schema.org",
                "@type": "EducationalOccupationalProgram",
                "name": studiengang,
                "educationalCredentialAwarded": abschluss,
                "programType": art,
                "termDuration": parseInt(regelstudienzeit.split(" ")[0]),
                "termsPerYear": 2,
                "programPrerequisites": zulassungsbeschraenkung,
                "numberOfCredits": ects.map(item => {
                    let [credits, type] = item.split('im');
                    return parseInt(credits.trim())
                }),
                "educationalProgramMode": "Full-time",
                "startDate": studienbeginn.map(item => item === "Wintersemester" ? "2024-10-01" : "2025-04-01"),
                "applicationDeadline": bewerbungsfrist.map(date => date.trim() === "15. September" ? "2024-09-15" : "2025-03-15"),
                "provider": schemaJSON
            };
        return studieninfo
    }


    schemaJSON = add_educational_program(schemaJSON);
    const script = document.createElement('script');
    script.type = 'application/ld+json';
    script.text = JSON.stringify(schemaJSON);
    document.head.appendChild(script);

</script>